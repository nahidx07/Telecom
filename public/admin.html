<!DOCTYPE html>
<html>
<head>
    <title>Admin Panel</title>
    <style>
        body { font-family: sans-serif; padding: 20px; display: flex; gap: 20px; }
        .box { flex: 1; background: #eee; padding: 20px; border-radius: 10px; }
        input, select, button { width: 100%; padding: 10px; margin: 10px 0; }
        .req-item { background: white; padding: 10px; margin-bottom: 5px; border-radius: 5px; }
    </style>
</head>
<body>

    <div class="box">
        <h3>Add Offer</h3>
        <input type="text" id="off-title" placeholder="Offer Title">
        <input type="number" id="off-price" placeholder="Price">
        <select id="off-op"><option>GP</option><option>Robi</option><option>Airtel</option><option>Banglalink</option></select>
        <select id="off-cat"><option>Internet</option><option>Minute</option><option>Bundle</option><option>SMS</option></select>
        <button onclick="addOffer()">Add Offer</button>

        <hr>
        <h3>Settings</h3>
        <input type="text" id="pay-num" placeholder="Admin Payment Number">
        <button onclick="updateSettings()">Update Payment Number</button>
    </div>

    <div class="box">
        <h3>Payment Requests</h3>
        <div id="request-list"></div>
    </div>

    <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-database-compat.js"></script>
    <script>
        const firebaseConfig = {
  apiKey: "AIzaSyCbYJQ9y9CJKiT5aJyrIA0pFRGy1uvZikA",
  authDomain: "telicombangla-1.firebaseapp.com",
  projectId: "telicombangla-1",
  storageBucket: "telicombangla-1.firebasestorage.app",
  messagingSenderId: "1020351520674",
  appId: "1:1020351520674:web:c84659bc5ca2f6b41edcfb"
};
        firebase.initializeApp(firebaseConfig);
        const db = firebase.database();

        function addOffer() {
            const title = document.getElementById('off-title').value;
            const price = document.getElementById('off-price').value;
            const op = document.getElementById('off-op').value;
            const cat = document.getElementById('off-cat').value;
            db.ref('offers').push({ title, price, operator: op, category: cat });
            alert("Added!");
        }

        function updateSettings() {
            const num = document.getElementById('pay-num').value;
            db.ref('settings/paymentNumber').set(num);
            alert("Updated!");
        }

        // Load Payment Requests
        db.ref('addMoneyRequests').on('value', snap => {
            const list = document.getElementById('request-list');
            list.innerHTML = "";
            const data = snap.val();
            for(let id in data) {
                if(data[id].status === 'pending') {
                    list.innerHTML += `
                        <div class="req-item">
                            <p>Sender: ${data[id].sender}</p>
                            <p>TrxID: ${data[id].trxId}</p>
                            <button onclick="approve('${id}', '${data[id].uid}')">Approve</button>
                            <button onclick="reject('${id}')" style="background:red; color:white;">Reject</button>
                        </div>
                    `;
                }
            }
        });

        function approve(reqId, uid) {
            const amount = prompt("কত টাকা এড করবেন?");
            if(amount) {
                db.ref('users/' + uid + '/balance').transaction(current => (current || 0) + parseFloat(amount));
                db.ref('addMoneyRequests/' + reqId).update({ status: 'approved' });
            }
        }
    </script>
</body>
</html>
