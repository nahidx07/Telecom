<!DOCTYPE html>
<html lang="bn">
<head>
    <meta charset="UTF-8">
    <title>Admin Panel - BD Offer</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        :root { --sidebar: #1a2236; --bg: #0f172a; --card: #1e293b; --yellow: #f1c40f; }
        body { margin: 0; display: flex; height: 100vh; background: var(--bg); color: white; font-family: sans-serif; overflow: hidden; }
        
        /* Auth */
        #admin-login { position: fixed; inset: 0; background: var(--bg); z-index: 5000; display: flex; align-items: center; justify-content: center; }
        .login-box { background: var(--card); padding: 40px; border-radius: 15px; width: 320px; text-align: center; }

        /* Sidebar */
        .sidebar { width: 260px; background: var(--sidebar); display: flex; flex-direction: column; padding: 25px; transition: 0.3s; }
        .sidebar.hidden { margin-left: -260px; }
        .nav-item { padding: 12px 15px; color: #94a3b8; cursor: pointer; display: flex; align-items: center; gap: 12px; border-radius: 8px; margin-bottom: 5px; }
        .nav-item.active { background: rgba(255,255,255,0.05); color: var(--yellow); border-left: 3px solid var(--yellow); }

        /* Content */
        .main { flex: 1; overflow-y: auto; display: flex; flex-direction: column; }
        header { padding: 15px 30px; background: var(--sidebar); display: flex; justify-content: space-between; align-items: center; }
        .content-body { padding: 30px; }
        .card { background: var(--card); padding: 20px; border-radius: 12px; margin-bottom: 20px; }
        input, select, textarea { width: 100%; padding: 10px; background: #0f172a; border: 1px solid #334155; color: white; border-radius: 6px; margin: 10px 0; }
        button { cursor: pointer; border-radius: 6px; border: none; font-weight: bold; }
        .btn-y { background: var(--yellow); color: black; padding: 10px 20px; }

        .hidden-el { display: none; }
    </style>
</head>
<body>

    <div id="admin-login">
        <div class="login-box">
            <h2>Admin Login</h2>
            <input type="email" id="a-email" placeholder="Email">
            <input type="password" id="a-pass" placeholder="Password">
            <button class="btn-y" onclick="adminLogin()">Login</button>
        </div>
    </div>

    <div class="sidebar" id="sidebar">
        <h2 style="color:white;"><i class="fas fa-coins" style="color:var(--yellow);"></i> CoinMaster</h2><br>
        <div class="nav-item active" onclick="show('dash', this)"><i class="fas fa-th-large"></i> Dashboard</div>
        <div class="nav-item" onclick="show('members', this)"><i class="fas fa-users"></i> Members</div>
        <div class="nav-item" onclick="show('offers', this)"><i class="fas fa-plus-circle"></i> Add Offer</div>
        <div class="nav-item" onclick="show('payments', this)"><i class="fas fa-wallet"></i> Payments</div>
        <div class="nav-item" style="margin-top:auto" onclick="location.reload()"><i class="fas fa-sign-out-alt"></i> Logout</div>
    </div>

    <div class="main">
        <header>
            <i class="fas fa-bars" onclick="document.getElementById('sidebar').classList.toggle('hidden')"></i>
            <span>Admin Premium</span>
        </header>

        <div class="content-body">
            <div id="page-dash" class="page"><h1>Dashboard</h1></div>

            <div id="page-members" class="page hidden-el">
                <div class="card">
                    <h3>Members Management</h3>
                    <div id="user-list"></div>
                </div>
            </div>

            <div id="page-offers" class="page hidden-el">
                <div class="card">
                    <h3>Add Offer</h3>
                    <input type="text" id="o-title" placeholder="Title">
                    <input type="number" id="o-price" placeholder="Price">
                    <select id="o-op"><option>GP</option><option>Robi</option><option>Airtel</option><option>BL</option></select>
                    <button class="btn-y" onclick="saveOffer()">Save Offer</button>
                </div>
            </div>

            <div id="page-payments" class="page hidden-el">
                <div class="card">
                    <h3>Payment Methods</h3>
                    <input type="text" id="p-bkash" placeholder="Bkash Number">
                    <input type="text" id="p-nagad" placeholder="Nagad Number">
                    <input type="text" id="p-rocket" placeholder="Rocket Number">
                    <textarea id="p-inst" placeholder="Instruction text"></textarea>
                    <button class="btn-y" onclick="savePayments()">Update Payments</button>
                </div>
            </div>
        </div>
    </div>

    <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-database-compat.js"></script>

    <script>
        const firebaseConfig = {
  apiKey: "AIzaSyCbYJQ9y9CJKiT5aJyrIA0pFRGy1uvZikA",
  authDomain: "telicombangla-1.firebaseapp.com",
  projectId: "telicombangla-1",
  storageBucket: "telicombangla-1.firebasestorage.app",
  messagingSenderId: "1020351520674",
  appId: "1:1020351520674:web:c84659bc5ca2f6b41edcfb"
};
        firebase.initializeApp(firebaseConfig);
        const auth = firebase.auth();
        const db = firebase.database();

        function adminLogin() {
            auth.signInWithEmailAndPassword(document.getElementById('a-email').value, document.getElementById('a-pass').value)
                .then(() => document.getElementById('admin-login').style.display='none')
                .catch(e => alert(e.message));
        }

        function show(id, el) {
            document.querySelectorAll('.page').forEach(p => p.classList.add('hidden-el'));
            document.getElementById('page-'+id).classList.remove('hidden-el');
            document.querySelectorAll('.nav-item').forEach(n => n.classList.remove('active'));
            el.classList.add('active');
        }

        function savePayments() {
            db.ref('settings/payments').set({
                bkash: document.getElementById('p-bkash').value,
                nagad: document.getElementById('p-nagad').value,
                rocket: document.getElementById('p-rocket').value,
                instruction: document.getElementById('p-inst').value
            }).then(() => alert('Saved!'));
        }

        db.ref('users').on('value', snap => {
            const users = snap.val();
            let html = '';
            for(let id in users) {
                html += `<div style="padding:10px; border-bottom:1px solid #334155; display:flex; justify-content:space-between;">
                    <span>${users[id].name || 'User'} (৳${users[id].balance || 0})</span>
                    <div>
                        <button onclick="editBal('${id}', 100)">+100</button>
                        <button onclick="editBal('${id}', -100)">-100</button>
                        <button onclick="toggleBan('${id}', '${users[id].status}')">Ban</button>
                    </div>
                </div>`;
            }
            document.getElementById('user-list').innerHTML = html;
        });

        function editBal(uid, amt) { db.ref('users/'+uid+'/balance').transaction(c => (c||0)+amt); }
    </script>
</body>
</html>
